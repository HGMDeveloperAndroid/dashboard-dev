{"ast":null,"code":"import Router from 'next/router';\nvar createSession = function createSession(token, name, rol, profilePictre, id, dark_theme, theme, logo, locale) {\n  localStorage.setItem('token', token);\n  localStorage.setItem('name', name);\n  localStorage.setItem('rol', rol.join('|'));\n  localStorage.setItem('id', id);\n  localStorage.setItem('dark_theme', dark_theme.toString());\n  localStorage.setItem('locale', locale);\n  if (theme !== null || !theme) {\n    localStorage.setItem('theme', JSON.stringify(theme));\n  } else {\n    localStorage.setItem('theme', JSON.stringify({}));\n  }\n  if (profilePictre && profilePictre.length > 0) {\n    localStorage.setItem('profilePicture', \"https://cdn-pricecheck.sfo2.digitaloceanspaces.com/\".concat(profilePictre));\n  }\n  if (logo && logo.length > 0) {\n    localStorage.setItem('logo', \"https://lampt3bdiag.blob.core.windows.net/pricecheckv2/\".concat(logo));\n  } else {\n    localStorage.setItem('logo', \"/img/logo.png\");\n  }\n};\nvar deleteSession = function deleteSession() {\n  localStorage.removeItem('locale');\n  localStorage.removeItem('dark_theme');\n  localStorage.removeItem('token');\n  localStorage.removeItem('name');\n  localStorage.removeItem('rol');\n  localStorage.setItem('logo', \"/img/logo.png\");\n  localStorage.removeItem('profilePicture');\n  localStorage.removeItem('theme');\n};\nvar getToken = function getToken() {\n  return localStorage.getItem('token');\n};\nvar getName = function getName() {\n  return localStorage.getItem('name');\n};\nvar getId = function getId() {\n  return localStorage.getItem('id');\n};\nvar getDarkTheme = function getDarkTheme() {\n  return localStorage.getItem('dark_theme');\n};\nvar getLocale = function getLocale() {\n  var isBrowser = function isBrowser() {\n    return true;\n  };\n  var hasLocale = function hasLocale() {\n    return localStorage.getItem('locale') || false;\n  };\n  var locale = 'es';\n  if (isBrowser() && hasLocale()) {\n    locale = localStorage.getItem('locale') || locale;\n  }\n  return locale;\n};\nvar getProfilePicture = function getProfilePicture() {\n  return localStorage.getItem('profilePicture');\n};\nvar getRoles = function getRoles() {\n  var roles = localStorage.getItem('rol');\n  if (roles) return roles.split('|');\n  return null;\n};\nvar validateSession = function validateSession(newRoute) {\n  if (!localStorage.getItem('token')) {\n    Router.push('/login');\n  } else if (newRoute) {\n    Router.push(newRoute);\n  }\n};\nvar getHeader = function getHeader() {\n  var token = localStorage.getItem('token');\n  return {\n    Authorization: \"Bearer \".concat(token)\n  };\n};\nvar validateIsAnalyst = function validateIsAnalyst() {\n  var role = '';\n  if (true) {\n    role = localStorage.getItem('rol');\n  }\n  var validation = role === 'Analista';\n  return validation;\n};\nvar validateIsAdmin = function validateIsAdmin() {\n  var role = '';\n  if (true) {\n    role = localStorage.getItem('rol');\n  }\n  return role === 'Admin';\n};\nvar getLogo = function getLogo() {\n  var logo = \"/img/logo.png\";\n  if (true) {\n    logo = localStorage.getItem('logo');\n    return logo;\n  }\n  return logo;\n};\nvar IsCustomTheme = function IsCustomTheme() {\n  var isCustom = false;\n  var theme = \"\";\n  var objTheme = {};\n  if (true) {\n    var hasDarkTheme = getDarkTheme() === '1' ? true : false;\n    theme = localStorage.getItem('theme');\n    if (theme !== \"undefined\") {\n      objTheme = JSON.parse(localStorage.getItem('theme')) || {};\n    }\n    if (Object.keys(objTheme).length !== 0 && !hasDarkTheme) {\n      isCustom = true;\n      return isCustom;\n    }\n  }\n  return isCustom;\n};\n_c = IsCustomTheme;\nvar getTheme = function getTheme() {\n  var theme = \"\";\n  var objTheme = {};\n  if (true) {\n    if (theme !== \"undefined\" || !theme) {\n      objTheme = JSON.parse(localStorage.getItem('theme'));\n    }\n    return objTheme;\n  }\n  return objTheme;\n};\nexport { getLogo, IsCustomTheme, createSession, deleteSession, getToken, getName, getProfilePicture, getRoles, validateSession, getHeader, getId, getDarkTheme, getLocale, validateIsAnalyst, getTheme, validateIsAdmin };\nvar _c;\n$RefreshReg$(_c, \"IsCustomTheme\");","map":{"version":3,"names":["Router","createSession","token","name","rol","profilePictre","id","dark_theme","theme","logo","locale","localStorage","setItem","join","toString","JSON","stringify","length","concat","deleteSession","removeItem","getToken","getItem","getName","getId","getDarkTheme","getLocale","isBrowser","hasLocale","getProfilePicture","getRoles","roles","split","validateSession","newRoute","push","getHeader","Authorization","validateIsAnalyst","role","validation","validateIsAdmin","getLogo","IsCustomTheme","isCustom","objTheme","hasDarkTheme","parse","Object","keys","_c","getTheme","$RefreshReg$"],"sources":["C:/Users/hgm/Desktop/Maquina3B/ManDoc/Proyectos/Php/DashBoard/SVN/Develop/pricecheck-dashboard/utils/session-management.ts"],"sourcesContent":["import Router from 'next/router'\n\nconst createSession = (token: string, name: string, rol: Array<string>, profilePictre: string, id: string, dark_theme?: number, theme?: any, logo?: string,  locale?: string) => {\n    localStorage.setItem('token', token)\n    localStorage.setItem('name', name)\n    localStorage.setItem('rol', rol.join('|'))\n    localStorage.setItem('id', id)\n    localStorage.setItem('dark_theme', dark_theme.toString())\n    localStorage.setItem('locale', locale)\n\n    if (theme !== null || !theme) {\n        localStorage.setItem('theme', JSON.stringify(theme));\n    } else {\n        localStorage.setItem('theme', JSON.stringify({}));\n    }\n    if (profilePictre && profilePictre.length > 0) {\n        localStorage.setItem('profilePicture', `https://cdn-pricecheck.sfo2.digitaloceanspaces.com/${profilePictre}`)\n    }\n    if(logo && logo.length > 0) {\n        localStorage.setItem('logo', `https://lampt3bdiag.blob.core.windows.net/pricecheckv2/${logo}`) \n    } else {\n        localStorage.setItem('logo', `/img/logo.png`) \n    }\n}\n\nconst deleteSession = () => {\n    localStorage.removeItem('locale')\n    localStorage.removeItem('dark_theme')\n    localStorage.removeItem('token')\n    localStorage.removeItem('name')\n    localStorage.removeItem('rol')\n    localStorage.setItem('logo', `/img/logo.png`) \n    localStorage.removeItem('profilePicture')\n    localStorage.removeItem('theme')\n}\n\nconst getToken = (): string | null => localStorage.getItem('token')\n\n\nconst getName = (): string | null => localStorage.getItem('name')\n\nconst getId = (): string | null => localStorage.getItem('id')\n\nconst getDarkTheme = (): any => localStorage.getItem('dark_theme')\nconst getLocale = (): any => {\n    const isBrowser = () => typeof window !== 'undefined'\n    const hasLocale = () => localStorage.getItem('locale') || false\n\n    let locale = 'es';\n\n    if (isBrowser() && hasLocale()) {\n        locale =  localStorage.getItem('locale') || locale\n    }\n\n    return locale\n}\n\nconst getProfilePicture = (): string | null => localStorage.getItem('profilePicture')\n\nconst getRoles = (): Array<string> | null => {\n    const roles = localStorage.getItem('rol')\n    if (roles)\n        return roles.split('|')\n\n    return null\n}\n\nconst validateSession = (newRoute?: string) => {\n    if (!localStorage.getItem('token')) {\n        Router.push('/login')\n    } else if (newRoute) {\n        Router.push(newRoute)\n    }\n}\n\nconst getHeader = (): { Authorization: string } => {\n    const token = localStorage.getItem('token')\n    return { Authorization: `Bearer ${token}` }\n}\n\nconst validateIsAnalyst = () => {\n    let role = '';\n    if (typeof window !== \"undefined\") {\n\n        role = localStorage.getItem('rol');\n\n    }\n    const validation = role === 'Analista';\n    return validation;\n}\n\nconst validateIsAdmin = () => {\n    let role = '';\n    if (typeof window !== \"undefined\") {\n\n        role = localStorage.getItem('rol');\n    }\n    return role === 'Admin';\n}\n\nconst getLogo = () => {\n    let logo = \"/img/logo.png\";\n    if (typeof window !== \"undefined\") {\n\n        logo = localStorage.getItem('logo');\n        return logo;\n    }\n    return logo;\n}\nconst IsCustomTheme = () => {\n    let isCustom = false;\n    let theme = \"\";\n    let objTheme = {}\n    if (typeof window !== \"undefined\") {\n        const hasDarkTheme = getDarkTheme() === '1' ? true : false;\n        theme = localStorage.getItem('theme');\n        if (theme !== \"undefined\") {\n            objTheme = JSON.parse(localStorage.getItem('theme')) || {};\n        }\n\n        if (Object.keys(objTheme).length !== 0 && !hasDarkTheme) {\n            isCustom = true;\n            return isCustom;\n        }\n    }\n    return isCustom;\n}\n\nconst getTheme = () => {\n    let theme = \"\";\n    let objTheme = {}\n    if (typeof window !== \"undefined\") {\n        if (theme !== \"undefined\" || !theme) {\n            objTheme = JSON.parse(localStorage.getItem('theme'));\n        }\n\n        return objTheme;\n    }\n    return objTheme;\n}\n\nexport {\n    getLogo,\n    IsCustomTheme,\n    createSession,\n    deleteSession,\n    getToken,\n    getName,\n    getProfilePicture,\n    getRoles,\n    validateSession,\n    getHeader,\n    getId,\n    getDarkTheme,\n    getLocale,\n    validateIsAnalyst,\n    getTheme,\n    validateIsAdmin,\n}\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,aAAa;AAEhC,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,KAAa,EAAEC,IAAY,EAAEC,GAAkB,EAAEC,aAAqB,EAAEC,EAAU,EAAEC,UAAmB,EAAEC,KAAW,EAAEC,IAAa,EAAGC,MAAe,EAAK;EAC7KC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEV,KAAK,CAAC;EACpCS,YAAY,CAACC,OAAO,CAAC,MAAM,EAAET,IAAI,CAAC;EAClCQ,YAAY,CAACC,OAAO,CAAC,KAAK,EAAER,GAAG,CAACS,IAAI,CAAC,GAAG,CAAC,CAAC;EAC1CF,YAAY,CAACC,OAAO,CAAC,IAAI,EAAEN,EAAE,CAAC;EAC9BK,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEL,UAAU,CAACO,QAAQ,EAAE,CAAC;EACzDH,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEF,MAAM,CAAC;EAEtC,IAAIF,KAAK,KAAK,IAAI,IAAI,CAACA,KAAK,EAAE;IAC1BG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEG,IAAI,CAACC,SAAS,CAACR,KAAK,CAAC,CAAC;EACxD,CAAC,MAAM;IACHG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEG,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD;EACA,IAAIX,aAAa,IAAIA,aAAa,CAACY,MAAM,GAAG,CAAC,EAAE;IAC3CN,YAAY,CAACC,OAAO,CAAC,gBAAgB,wDAAAM,MAAA,CAAwDb,aAAa,EAAG;EACjH;EACA,IAAGI,IAAI,IAAIA,IAAI,CAACQ,MAAM,GAAG,CAAC,EAAE;IACxBN,YAAY,CAACC,OAAO,CAAC,MAAM,4DAAAM,MAAA,CAA4DT,IAAI,EAAG;EAClG,CAAC,MAAM;IACHE,YAAY,CAACC,OAAO,CAAC,MAAM,kBAAkB;EACjD;AACJ,CAAC;AAED,IAAMO,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;EACxBR,YAAY,CAACS,UAAU,CAAC,QAAQ,CAAC;EACjCT,YAAY,CAACS,UAAU,CAAC,YAAY,CAAC;EACrCT,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;EAChCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC;EAC/BT,YAAY,CAACS,UAAU,CAAC,KAAK,CAAC;EAC9BT,YAAY,CAACC,OAAO,CAAC,MAAM,kBAAkB;EAC7CD,YAAY,CAACS,UAAU,CAAC,gBAAgB,CAAC;EACzCT,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;AACpC,CAAC;AAED,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA;EAAA,OAAwBV,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;AAAA;AAGnE,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA;EAAA,OAAwBZ,YAAY,CAACW,OAAO,CAAC,MAAM,CAAC;AAAA;AAEjE,IAAME,KAAK,GAAG,SAARA,KAAKA,CAAA;EAAA,OAAwBb,YAAY,CAACW,OAAO,CAAC,IAAI,CAAC;AAAA;AAE7D,IAAMG,YAAY,GAAG,SAAfA,YAAYA,CAAA;EAAA,OAAcd,YAAY,CAACW,OAAO,CAAC,YAAY,CAAC;AAAA;AAClE,IAAMI,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAc;EACzB,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAA;IAAA;EAAA,CAAsC;EACrD,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAA;IAAA,OAASjB,YAAY,CAACW,OAAO,CAAC,QAAQ,CAAC,IAAI,KAAK;EAAA;EAE/D,IAAIZ,MAAM,GAAG,IAAI;EAEjB,IAAIiB,SAAS,EAAE,IAAIC,SAAS,EAAE,EAAE;IAC5BlB,MAAM,GAAIC,YAAY,CAACW,OAAO,CAAC,QAAQ,CAAC,IAAIZ,MAAM;EACtD;EAEA,OAAOA,MAAM;AACjB,CAAC;AAED,IAAMmB,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA;EAAA,OAAwBlB,YAAY,CAACW,OAAO,CAAC,gBAAgB,CAAC;AAAA;AAErF,IAAMQ,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAA+B;EACzC,IAAMC,KAAK,GAAGpB,YAAY,CAACW,OAAO,CAAC,KAAK,CAAC;EACzC,IAAIS,KAAK,EACL,OAAOA,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC;EAE3B,OAAO,IAAI;AACf,CAAC;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,QAAiB,EAAK;EAC3C,IAAI,CAACvB,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,EAAE;IAChCtB,MAAM,CAACmC,IAAI,CAAC,QAAQ,CAAC;EACzB,CAAC,MAAM,IAAID,QAAQ,EAAE;IACjBlC,MAAM,CAACmC,IAAI,CAACD,QAAQ,CAAC;EACzB;AACJ,CAAC;AAED,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAoC;EAC/C,IAAMlC,KAAK,GAAGS,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;EAC3C,OAAO;IAAEe,aAAa,YAAAnB,MAAA,CAAYhB,KAAK;EAAG,CAAC;AAC/C,CAAC;AAED,IAAMoC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5B,IAAIC,IAAI,GAAG,EAAE;EACb,UAAmC;IAE/BA,IAAI,GAAG5B,YAAY,CAACW,OAAO,CAAC,KAAK,CAAC;EAEtC;EACA,IAAMkB,UAAU,GAAGD,IAAI,KAAK,UAAU;EACtC,OAAOC,UAAU;AACrB,CAAC;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC1B,IAAIF,IAAI,GAAG,EAAE;EACb,UAAmC;IAE/BA,IAAI,GAAG5B,YAAY,CAACW,OAAO,CAAC,KAAK,CAAC;EACtC;EACA,OAAOiB,IAAI,KAAK,OAAO;AAC3B,CAAC;AAED,IAAMG,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EAClB,IAAIjC,IAAI,GAAG,eAAe;EAC1B,UAAmC;IAE/BA,IAAI,GAAGE,YAAY,CAACW,OAAO,CAAC,MAAM,CAAC;IACnC,OAAOb,IAAI;EACf;EACA,OAAOA,IAAI;AACf,CAAC;AACD,IAAMkC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;EACxB,IAAIC,QAAQ,GAAG,KAAK;EACpB,IAAIpC,KAAK,GAAG,EAAE;EACd,IAAIqC,QAAQ,GAAG,CAAC,CAAC;EACjB,UAAmC;IAC/B,IAAMC,YAAY,GAAGrB,YAAY,EAAE,KAAK,GAAG,GAAG,IAAI,GAAG,KAAK;IAC1DjB,KAAK,GAAGG,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;IACrC,IAAId,KAAK,KAAK,WAAW,EAAE;MACvBqC,QAAQ,GAAG9B,IAAI,CAACgC,KAAK,CAACpC,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;IAC9D;IAEA,IAAI0B,MAAM,CAACC,IAAI,CAACJ,QAAQ,CAAC,CAAC5B,MAAM,KAAK,CAAC,IAAI,CAAC6B,YAAY,EAAE;MACrDF,QAAQ,GAAG,IAAI;MACf,OAAOA,QAAQ;IACnB;EACJ;EACA,OAAOA,QAAQ;AACnB,CAAC;AAAAM,EAAA,GAjBKP,aAAa;AAmBnB,IAAMQ,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACnB,IAAI3C,KAAK,GAAG,EAAE;EACd,IAAIqC,QAAQ,GAAG,CAAC,CAAC;EACjB,UAAmC;IAC/B,IAAIrC,KAAK,KAAK,WAAW,IAAI,CAACA,KAAK,EAAE;MACjCqC,QAAQ,GAAG9B,IAAI,CAACgC,KAAK,CAACpC,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,CAAC;IACxD;IAEA,OAAOuB,QAAQ;EACnB;EACA,OAAOA,QAAQ;AACnB,CAAC;AAED,SACIH,OAAO,EACPC,aAAa,EACb1C,aAAa,EACbkB,aAAa,EACbE,QAAQ,EACRE,OAAO,EACPM,iBAAiB,EACjBC,QAAQ,EACRG,eAAe,EACfG,SAAS,EACTZ,KAAK,EACLC,YAAY,EACZC,SAAS,EACTY,iBAAiB,EACjBa,QAAQ,EACRV,eAAe;AAClB,IAAAS,EAAA;AAAAE,YAAA,CAAAF,EAAA"},"metadata":{},"sourceType":"module"}