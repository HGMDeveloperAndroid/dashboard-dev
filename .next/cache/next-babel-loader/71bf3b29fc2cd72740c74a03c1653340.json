{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hgm\\\\Desktop\\\\Maquina3B\\\\ManDoc\\\\Proyectos\\\\Php\\\\DashBoard\\\\SVN\\\\Develop\\\\pricecheck-dashboard\\\\components\\\\MapsGoogle\\\\MapsGoogle.jsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { GoogleMap, useLoadScript } from \"@react-google-maps/api\";\nconst mapContainerStyle = {\n  height: \"30vw\",\n  width: \"100%\"\n};\nconst options = {\n  disableDefaultUI: true,\n  zoomControl: true\n};\nconst center = {\n  lat: 19.4978,\n  lng: -99.1269\n};\nconst libraries = [\"drawing\"];\nexport default function MapsGoogle(props) {\n  const {\n    setCoordsMap,\n    report\n  } = props;\n  const {\n    isLoaded,\n    loadError\n  } = useLoadScript({\n    googleMapsApiKey: \"AIzaSyB53WxFkvRCwORxy27DWzEI8z6MEsrquyU\",\n    libraries\n  });\n  const onRectangleComplete = rectangle => {\n    var bounds = rectangle.getBounds();\n    const NE = bounds.getNorthEast();\n    const SW = bounds.getSouthWest();\n    // North West\n    const NW = new google.maps.LatLng(NE.lat(), SW.lng());\n    // South East\n    const SE = new google.maps.LatLng(SW.lat(), NE.lng());\n    const newCoords = {\n      id: 0,\n      name: '',\n      position1: {\n        latitude: NW.lat(),\n        longitude: NW.lng()\n      },\n      position2: {\n        latitude: NE.lat(),\n        longitude: NE.lng()\n      },\n      position3: {\n        latitude: SW.lat(),\n        longitude: SW.lng()\n      },\n      position4: {\n        latitude: SE.lat(),\n        longitude: SE.lng()\n      }\n    };\n    setCoordsMap(newCoords);\n    // console.log('newCoords',newCoords)\n    // console.log('report',report)\n    // drawingManager.setMap(null);\n    google.maps.event.addListener(rectangle, 'bounds_changed', () => boundsChanged(rectangle));\n  };\n  const boundsChanged = rectangle => {\n    var bounds = rectangle.getBounds();\n    // console.log('bounds',bounds);\n    const NE = bounds.getNorthEast();\n    const SW = bounds.getSouthWest();\n    // North West\n    const NW = new google.maps.LatLng(NE.lat(), SW.lng());\n    // South East\n    const SE = new google.maps.LatLng(SW.lat(), NE.lng());\n    const newCoords = {\n      id: 0,\n      name: '',\n      position1: {\n        latitude: NW.lat(),\n        longitude: NW.lng()\n      },\n      position2: {\n        latitude: NE.lat(),\n        longitude: NE.lng()\n      },\n      position3: {\n        latitude: SW.lat(),\n        longitude: SW.lng()\n      },\n      position4: {\n        latitude: SE.lat(),\n        longitude: SE.lng()\n      }\n    };\n    setCoordsMap(newCoords);\n  };\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    const drawingManager = new google.maps.drawing.DrawingManager({\n      drawingControl: true,\n      drawingControlOptions: {\n        position: google.maps.ControlPosition.TOP_CENTER,\n        drawingModes: []\n      },\n      rectangleOptions: {\n        editable: true,\n        zIndex: 1,\n        draggable: true\n      }\n    });\n    if (report.position1.latitude && report.position1.latitude[0] == NaN) {\n      var bounds = {\n        north: parseFloat(report.position1.latitude[0]),\n        south: parseFloat(report.position3.latitude[0]),\n        east: parseFloat(report.position2.longitude),\n        west: parseFloat(report.position1.longitude)\n      };\n    } else {\n      var bounds = {\n        north: parseFloat(report.position1.latitude),\n        south: parseFloat(report.position3.latitude),\n        east: parseFloat(report.position2.longitude),\n        west: parseFloat(report.position1.longitude)\n      };\n    }\n    console.log('report nan', report.position1 == []);\n    console.log('report nan', report.position1.length);\n    if (report.position1.length == 0 && report.position2.length == 0 && report.position3.length == 0 && report.position4.length == 0) {\n      bounds = {\n        north: 19.46154886259391,\n        south: 19.272394000451268,\n        east: -99.01978330453124,\n        west: -99.3136675775\n      };\n    }\n    console.log(\"Onloadmap report\", report);\n    console.log(\"OnloadMap bounds\", bounds);\n    var rectangle = new google.maps.Rectangle({\n      bounds: bounds,\n      editable: true,\n      draggable: true\n    });\n    rectangle.setEditable(true);\n    rectangle.setMap(map);\n    google.maps.event.addListener(rectangle, 'bounds_changed', () => boundsChanged(rectangle));\n    google.maps.event.addListener(drawingManager, 'rectanglecomplete', onRectangleComplete);\n    // bounds_changed\n    drawingManager.setMap(map);\n    mapRef.current = map;\n  }, []);\n\n  // if (loadError) return \"Error\";\n  // if (!isLoaded) return \"Loading...\";\n  return __jsx(React.Fragment, null, !isLoaded ? 'Cargando mapa...' : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, __jsx(GoogleMap, {\n    id: \"map\",\n    mapContainerStyle: mapContainerStyle,\n    zoom: 8,\n    center: center,\n    options: options,\n    onClick: () => {},\n    onLoad: onMapLoad,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  })), loadError ? 'Error' : '');\n}","map":{"version":3,"names":["React","GoogleMap","useLoadScript","mapContainerStyle","height","width","options","disableDefaultUI","zoomControl","center","lat","lng","libraries","MapsGoogle","props","setCoordsMap","report","isLoaded","loadError","googleMapsApiKey","onRectangleComplete","rectangle","bounds","getBounds","NE","getNorthEast","SW","getSouthWest","NW","google","maps","LatLng","SE","newCoords","id","name","position1","latitude","longitude","position2","position3","position4","event","addListener","boundsChanged","mapRef","useRef","onMapLoad","useCallback","map","drawingManager","drawing","DrawingManager","drawingControl","drawingControlOptions","position","ControlPosition","TOP_CENTER","drawingModes","rectangleOptions","editable","zIndex","draggable","NaN","north","parseFloat","south","east","west","console","log","length","Rectangle","setEditable","setMap","current","__jsx","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","zoom","onClick","onLoad"],"sources":["C:/Users/hgm/Desktop/Maquina3B/ManDoc/Proyectos/Php/DashBoard/SVN/Develop/pricecheck-dashboard/components/MapsGoogle/MapsGoogle.jsx"],"sourcesContent":["import React from \"react\";\nimport {\n  GoogleMap,\n  useLoadScript,\n} from \"@react-google-maps/api\";\n\n\nconst mapContainerStyle = {\n  height: \"30vw\",\n  width: \"100%\",\n};\nconst options = {\n  disableDefaultUI: true,\n  zoomControl: true,\n};\nconst center  = {\n  lat: 19.4978,\n  lng: -99.1269,\n};\nconst libraries = [\"drawing\"];\n\nexport default function MapsGoogle(props) {\n  const { setCoordsMap, report} = props;\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: \"AIzaSyB53WxFkvRCwORxy27DWzEI8z6MEsrquyU\",\n    libraries,\n\n  });\n  const onRectangleComplete = rectangle => {\n    var bounds = rectangle.getBounds();\n    const NE = bounds.getNorthEast();\n    const SW = bounds.getSouthWest();\n    // North West\n    const NW = new google.maps.LatLng(NE.lat(),SW.lng());\n    // South East\n    const SE = new google.maps.LatLng(SW.lat(),NE.lng());\n    const newCoords = {\n        id: 0,\n        name: '',\n        position1:{\n          latitude:NW.lat(),\n          longitude:NW.lng()},\n        position2:{\n          latitude:NE.lat(),\n          longitude:NE.lng()},\n        position3:{\n          latitude:SW.lat(),\n          longitude:SW.lng()},\n        position4:{\n          latitude:SE.lat(),\n          longitude:SE.lng()}\n      };\n    setCoordsMap(newCoords);\n    // console.log('newCoords',newCoords)\n    // console.log('report',report)\n    // drawingManager.setMap(null);\n    google.maps.event.addListener(rectangle, 'bounds_changed', () => boundsChanged(rectangle));\n  }\n  const boundsChanged = (rectangle) => {\n    var bounds = rectangle.getBounds();\n    // console.log('bounds',bounds);\n    const NE = bounds.getNorthEast();\n    const SW = bounds.getSouthWest();\n    // North West\n    const NW = new google.maps.LatLng(NE.lat(),SW.lng());\n    // South East\n    const SE = new google.maps.LatLng(SW.lat(),NE.lng());\n    const newCoords = {\n      id: 0,\n      name: '',\n      position1:{\n        latitude:NW.lat(),\n        longitude:NW.lng()},\n      position2:{\n        latitude:NE.lat(),\n        longitude:NE.lng()},\n      position3:{\n        latitude:SW.lat(),\n        longitude:SW.lng()},\n      position4:{\n        latitude:SE.lat(),\n        longitude:SE.lng()}\n    };\n    setCoordsMap(newCoords);\n  }\n\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback((map) => {\n\n    \n    const drawingManager = new google.maps.drawing.DrawingManager({\n      drawingControl: true,\n      drawingControlOptions: {\n        position: google.maps.ControlPosition.TOP_CENTER,\n        drawingModes: [\n        ],\n      },\n      rectangleOptions: {\n        editable: true,\n        zIndex: 1,\n        draggable: true,\n      }\n    });\n\n    if (report.position1.latitude && report.position1.latitude[0] == NaN ){\n      var bounds = {\n        north: parseFloat (report.position1.latitude[0]),\n        south: parseFloat(report.position3.latitude[0]),\n        east: parseFloat(report.position2.longitude),\n        west: parseFloat(report.position1.longitude),\n      };\n    }else{\n      var bounds = {\n        north: parseFloat (report.position1.latitude),\n        south: parseFloat(report.position3.latitude),\n        east: parseFloat(report.position2.longitude),\n        west: parseFloat(report.position1.longitude),\n      };\n    }\n    console.log('report nan',report.position1 == [])\n    console.log('report nan',report.position1.length)\n    if(report.position1.length == 0 && report.position2.length == 0 && report.position3.length == 0 && report.position4.length == 0){\n      bounds =  {\n          north:19.46154886259391,\n          south: 19.272394000451268,\n          east: -99.01978330453124,\n          west:-99.3136675775\n        }\n    }\n      console.log(\"Onloadmap report\", report);\n      console.log(\"OnloadMap bounds\", bounds);\n      \n      var rectangle = new google.maps.Rectangle({\n        bounds: bounds,\n        editable: true,\n        draggable: true,\n      });\n      rectangle.setEditable(true);\n      rectangle.setMap(map);\n      google.maps.event.addListener(rectangle, 'bounds_changed', () => boundsChanged(rectangle));\n    \n    google.maps.event.addListener(drawingManager, 'rectanglecomplete', onRectangleComplete);\n    // bounds_changed\n    drawingManager.setMap(map);\n    \n    mapRef.current = map;\n  }, []);\n\n\n\n  // if (loadError) return \"Error\";\n  // if (!isLoaded) return \"Loading...\";\n  return <>\n              {!isLoaded ?\n               'Cargando mapa...' :\n                <div>\n                  <GoogleMap\n                    id=\"map\"\n                    mapContainerStyle={mapContainerStyle}\n                    zoom={8}\n                    center={center}\n                    options={options}\n                    onClick={() => {}}\n                    onLoad={onMapLoad}\n                  >\n                  </GoogleMap>\n                </div>\n              }\n              {loadError ? 'Error' : ''}\n          </>;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}