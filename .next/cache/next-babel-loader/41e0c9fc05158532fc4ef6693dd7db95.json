{"ast":null,"code":"import Router from 'next/router';\nconst createSession = (token, name, rol, profilePictre, id, dark_theme, theme, logo, locale) => {\n  localStorage.setItem('token', token);\n  localStorage.setItem('name', name);\n  localStorage.setItem('rol', rol.join('|'));\n  localStorage.setItem('id', id);\n  localStorage.setItem('dark_theme', dark_theme.toString());\n  localStorage.setItem('locale', locale);\n  if (theme !== null || !theme) {\n    localStorage.setItem('theme', JSON.stringify(theme));\n  } else {\n    localStorage.setItem('theme', JSON.stringify({}));\n  }\n  if (profilePictre && profilePictre.length > 0) {\n    localStorage.setItem('profilePicture', `https://cdn-pricecheck.sfo2.digitaloceanspaces.com/${profilePictre}`);\n  }\n  if (logo && logo.length > 0) {\n    localStorage.setItem('logo', `https://lampt3bdiag.blob.core.windows.net/pricecheckv2/${logo}`);\n  } else {\n    localStorage.setItem('logo', `/img/logo.png`);\n  }\n};\nconst deleteSession = () => {\n  localStorage.removeItem('locale');\n  localStorage.removeItem('dark_theme');\n  localStorage.removeItem('token');\n  localStorage.removeItem('name');\n  localStorage.removeItem('rol');\n  localStorage.setItem('logo', `/img/logo.png`);\n  localStorage.removeItem('profilePicture');\n  localStorage.removeItem('theme');\n};\nconst getToken = () => localStorage.getItem('token');\nconst getName = () => localStorage.getItem('name');\nconst getId = () => localStorage.getItem('id');\nconst getDarkTheme = () => localStorage.getItem('dark_theme');\nconst getLocale = () => {\n  const isBrowser = () => false;\n  const hasLocale = () => localStorage.getItem('locale') || false;\n  let locale = 'es';\n  if (isBrowser() && hasLocale()) {\n    locale = localStorage.getItem('locale') || locale;\n  }\n  return locale;\n};\nconst getProfilePicture = () => localStorage.getItem('profilePicture');\nconst getRoles = () => {\n  const roles = localStorage.getItem('rol');\n  if (roles) return roles.split('|');\n  return null;\n};\nconst validateSession = newRoute => {\n  if (!localStorage.getItem('token')) {\n    Router.push('/login');\n  } else if (newRoute) {\n    Router.push(newRoute);\n  }\n};\nconst getHeader = () => {\n  const token = localStorage.getItem('token');\n  return {\n    Authorization: `Bearer ${token}`\n  };\n};\nconst validateIsAnalyst = () => {\n  let role = '';\n  if (false) {\n    role = localStorage.getItem('rol');\n  }\n  const validation = role === 'Analista';\n  return validation;\n};\nconst validateIsAdmin = () => {\n  let role = '';\n  if (false) {\n    role = localStorage.getItem('rol');\n  }\n  return role === 'Admin';\n};\nconst getLogo = () => {\n  let logo = \"/img/logo.png\";\n  if (false) {\n    logo = localStorage.getItem('logo');\n    return logo;\n  }\n  return logo;\n};\nconst IsCustomTheme = () => {\n  let isCustom = false;\n  let theme = \"\";\n  let objTheme = {};\n  if (false) {\n    const hasDarkTheme = getDarkTheme() === '1' ? true : false;\n    theme = localStorage.getItem('theme');\n    if (theme !== \"undefined\") {\n      objTheme = JSON.parse(localStorage.getItem('theme')) || {};\n    }\n    if (Object.keys(objTheme).length !== 0 && !hasDarkTheme) {\n      isCustom = true;\n      return isCustom;\n    }\n  }\n  return isCustom;\n};\nconst getTheme = () => {\n  let theme = \"\";\n  let objTheme = {};\n  if (false) {\n    if (theme !== \"undefined\" || !theme) {\n      objTheme = JSON.parse(localStorage.getItem('theme'));\n    }\n    return objTheme;\n  }\n  return objTheme;\n};\nexport { getLogo, IsCustomTheme, createSession, deleteSession, getToken, getName, getProfilePicture, getRoles, validateSession, getHeader, getId, getDarkTheme, getLocale, validateIsAnalyst, getTheme, validateIsAdmin };","map":{"version":3,"names":["Router","createSession","token","name","rol","profilePictre","id","dark_theme","theme","logo","locale","localStorage","setItem","join","toString","JSON","stringify","length","deleteSession","removeItem","getToken","getItem","getName","getId","getDarkTheme","getLocale","isBrowser","hasLocale","getProfilePicture","getRoles","roles","split","validateSession","newRoute","push","getHeader","Authorization","validateIsAnalyst","role","validation","validateIsAdmin","getLogo","IsCustomTheme","isCustom","objTheme","hasDarkTheme","parse","Object","keys","getTheme"],"sources":["C:/Users/hgm/Desktop/Maquina3B/ManDoc/Proyectos/Php/DashBoard/SVN/Develop/pricecheck-dashboard/utils/session-management.ts"],"sourcesContent":["import Router from 'next/router'\n\nconst createSession = (token: string, name: string, rol: Array<string>, profilePictre: string, id: string, dark_theme?: number, theme?: any, logo?: string,  locale?: string) => {\n    localStorage.setItem('token', token)\n    localStorage.setItem('name', name)\n    localStorage.setItem('rol', rol.join('|'))\n    localStorage.setItem('id', id)\n    localStorage.setItem('dark_theme', dark_theme.toString())\n    localStorage.setItem('locale', locale)\n\n    if (theme !== null || !theme) {\n        localStorage.setItem('theme', JSON.stringify(theme));\n    } else {\n        localStorage.setItem('theme', JSON.stringify({}));\n    }\n    if (profilePictre && profilePictre.length > 0) {\n        localStorage.setItem('profilePicture', `https://cdn-pricecheck.sfo2.digitaloceanspaces.com/${profilePictre}`)\n    }\n    if(logo && logo.length > 0) {\n        localStorage.setItem('logo', `https://lampt3bdiag.blob.core.windows.net/pricecheckv2/${logo}`) \n    } else {\n        localStorage.setItem('logo', `/img/logo.png`) \n    }\n}\n\nconst deleteSession = () => {\n    localStorage.removeItem('locale')\n    localStorage.removeItem('dark_theme')\n    localStorage.removeItem('token')\n    localStorage.removeItem('name')\n    localStorage.removeItem('rol')\n    localStorage.setItem('logo', `/img/logo.png`) \n    localStorage.removeItem('profilePicture')\n    localStorage.removeItem('theme')\n}\n\nconst getToken = (): string | null => localStorage.getItem('token')\n\n\nconst getName = (): string | null => localStorage.getItem('name')\n\nconst getId = (): string | null => localStorage.getItem('id')\n\nconst getDarkTheme = (): any => localStorage.getItem('dark_theme')\nconst getLocale = (): any => {\n    const isBrowser = () => typeof window !== 'undefined'\n    const hasLocale = () => localStorage.getItem('locale') || false\n\n    let locale = 'es';\n\n    if (isBrowser() && hasLocale()) {\n        locale =  localStorage.getItem('locale') || locale\n    }\n\n    return locale\n}\n\nconst getProfilePicture = (): string | null => localStorage.getItem('profilePicture')\n\nconst getRoles = (): Array<string> | null => {\n    const roles = localStorage.getItem('rol')\n    if (roles)\n        return roles.split('|')\n\n    return null\n}\n\nconst validateSession = (newRoute?: string) => {\n    if (!localStorage.getItem('token')) {\n        Router.push('/login')\n    } else if (newRoute) {\n        Router.push(newRoute)\n    }\n}\n\nconst getHeader = (): { Authorization: string } => {\n    const token = localStorage.getItem('token')\n    return { Authorization: `Bearer ${token}` }\n}\n\nconst validateIsAnalyst = () => {\n    let role = '';\n    if (typeof window !== \"undefined\") {\n\n        role = localStorage.getItem('rol');\n\n    }\n    const validation = role === 'Analista';\n    return validation;\n}\n\nconst validateIsAdmin = () => {\n    let role = '';\n    if (typeof window !== \"undefined\") {\n\n        role = localStorage.getItem('rol');\n    }\n    return role === 'Admin';\n}\n\nconst getLogo = () => {\n    let logo = \"/img/logo.png\";\n    if (typeof window !== \"undefined\") {\n\n        logo = localStorage.getItem('logo');\n        return logo;\n    }\n    return logo;\n}\nconst IsCustomTheme = () => {\n    let isCustom = false;\n    let theme = \"\";\n    let objTheme = {}\n    if (typeof window !== \"undefined\") {\n        const hasDarkTheme = getDarkTheme() === '1' ? true : false;\n        theme = localStorage.getItem('theme');\n        if (theme !== \"undefined\") {\n            objTheme = JSON.parse(localStorage.getItem('theme')) || {};\n        }\n\n        if (Object.keys(objTheme).length !== 0 && !hasDarkTheme) {\n            isCustom = true;\n            return isCustom;\n        }\n    }\n    return isCustom;\n}\n\nconst getTheme = () => {\n    let theme = \"\";\n    let objTheme = {}\n    if (typeof window !== \"undefined\") {\n        if (theme !== \"undefined\" || !theme) {\n            objTheme = JSON.parse(localStorage.getItem('theme'));\n        }\n\n        return objTheme;\n    }\n    return objTheme;\n}\n\nexport {\n    getLogo,\n    IsCustomTheme,\n    createSession,\n    deleteSession,\n    getToken,\n    getName,\n    getProfilePicture,\n    getRoles,\n    validateSession,\n    getHeader,\n    getId,\n    getDarkTheme,\n    getLocale,\n    validateIsAnalyst,\n    getTheme,\n    validateIsAdmin,\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}